<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Todo Input â€” React</title>
<script>
var __host = window.parent;
var __rpcId = 0;
window.rpcEmit = function(event, data) {
  __host.postMessage({ __aiga_rpc: true, id: 'e_' + (++__rpcId), type: 'event', event: event, data: data }, '*');
};
window.rpcOn = function(event, cb) {
  window.addEventListener('message', function(e) {
    var d = e.data;
    if (d && d.__aiga_rpc && d.type === 'event' && d.event === event) cb(d.data);
  });
};
</script>
<script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<style>
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:system-ui,-apple-system,sans-serif;background:#fff;color:#111;padding:20px}
.badge{display:inline-flex;align-items:center;gap:6px;font-size:11px;font-weight:600;color:#0ea5e9;background:#e0f2fe;padding:3px 10px;border-radius:999px;margin-bottom:16px}
.badge svg{width:14px;height:14px}
h2{font-size:16px;font-weight:600;margin-bottom:12px}
.form{display:flex;gap:8px;margin-bottom:16px}
input{flex:1;border:1px solid #e2e8f0;border-radius:8px;padding:10px 12px;font-size:14px;outline:none;transition:border-color .15s;font-family:inherit}
input:focus{border-color:#3b82f6;box-shadow:0 0 0 3px rgba(59,130,246,.1)}
button{border:none;border-radius:8px;padding:10px 20px;font-size:14px;font-weight:600;cursor:pointer;transition:all .15s;white-space:nowrap}
.btn-add{background:#3b82f6;color:#fff}
.btn-add:hover{background:#2563eb}
.btn-add:disabled{opacity:.5;cursor:not-allowed}
.todo-item{display:flex;align-items:center;gap:10px;padding:10px 0;border-bottom:1px solid #f1f5f9}
.todo-item:last-child{border-bottom:none}
.checkbox{width:20px;height:20px;border:2px solid #cbd5e1;border-radius:6px;cursor:pointer;display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:all .15s}
.checkbox.checked{background:#3b82f6;border-color:#3b82f6}
.checkbox.checked::after{content:'';display:block;width:6px;height:10px;border:solid #fff;border-width:0 2px 2px 0;transform:rotate(45deg) translate(-1px,-1px)}
.todo-text{font-size:14px;flex:1}
.todo-text.done{text-decoration:line-through;color:#94a3b8}
.btn-del{background:none;color:#94a3b8;font-size:18px;padding:4px 8px;border-radius:4px}
.btn-del:hover{background:#fef2f2;color:#ef4444}
.hint{font-size:12px;color:#94a3b8;margin-top:12px}
.empty{text-align:center;padding:24px;color:#94a3b8;font-size:13px}
</style>
</head>
<body>
<div class="badge"><svg viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="12" r="10"/></svg> React</div>
<h2>Todo Manager</h2>
<div id="root"></div>
<script>
var e = React.createElement;
var nextId = 1;
function App() {
  var ref = React.useState([
    { id: nextId++, text: 'Try editing this todo', done: false },
    { id: nextId++, text: 'Check the Svelte list', done: false },
    { id: nextId++, text: 'This one is done', done: true }
  ]);
  var todos = ref[0], setTodos = ref[1];
  var inputRef = React.useRef(null);

  React.useEffect(function() { rpcEmit('todos-change', { todos: todos }); }, [todos]);

  function addTodo() {
    var v = inputRef.current.value.trim();
    if (!v) return;
    setTodos(function(t) { return t.concat([{ id: nextId++, text: v, done: false }]); });
    inputRef.current.value = '';
    inputRef.current.focus();
  }
  function toggle(id) {
    setTodos(function(t) { return t.map(function(x) { return x.id === id ? Object.assign({}, x, { done: !x.done }) : x; }); });
  }
  function remove(id) {
    setTodos(function(t) { return t.filter(function(x) { return x.id !== id; }); });
  }

  return e('div', null,
    e('div', { className: 'form' },
      e('input', {
        ref: inputRef,
        placeholder: 'Add a new todo...',
        onKeyDown: function(ev) { if (ev.key === 'Enter') addTodo(); }
      }),
      e('button', { className: 'btn-add', onClick: addTodo }, 'Add')
    ),
    todos.length === 0
      ? e('div', { className: 'empty' }, 'No todos yet. Add one above!')
      : todos.map(function(t) {
          return e('div', { key: t.id, className: 'todo-item' },
            e('div', {
              className: 'checkbox' + (t.done ? ' checked' : ''),
              onClick: function() { toggle(t.id); }
            }),
            e('span', { className: 'todo-text' + (t.done ? ' done' : '') }, t.text),
            e('button', { className: 'btn-del', onClick: function() { remove(t.id); } }, '\u00d7')
          );
        }),
    e('p', { className: 'hint' }, 'Todo list is synced to the Svelte display via Aiga RPC')
  );
}
ReactDOM.createRoot(document.getElementById('root')).render(e(App));
</script>
</body>
</html>
